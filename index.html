<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>سجل صفقات التداول - النظام المتكامل</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <div class="user-info" id="userInfo" style="display: none;">
                <div class="user-details">
                    <span id="userGreeting">مرحباً، </span>
                    <div class="capital-info">
                        <span>رأس المال: $<span id="userCapital">0</span></span>
                        <button id="editCapitalBtn"><i class="fas fa-edit"></i></button>
                    </div>
                </div>
                <button id="logoutBtn"><i class="fas fa-sign-out-alt"></i> تسجيل الخروج</button>
            </div>
            <div class="header-content">
                <h1><i class="fas fa-chart-line"></i> سجل صفقات التداول المتكامل</h1>
                <p>أداة متكاملة لتسجيل وتحليل أداء صفقاتك في التداول</p>
            </div>
        </header>
        
        <section class="auth-section" id="authSection">
            <div class="auth-tabs">
                <div class="auth-tab active" data-form="login">تسجيل الدخول</div>
                <div class="auth-tab" data-form="register">إنشاء حساب</div>
            </div>
            
            <div class="auth-form active" id="loginForm">
                <h2><i class="fas fa-sign-in-alt"></i> تسجيل الدخول</h2>
                <div class="alert" id="loginAlert"></div>
                <form id="loginUserForm">
                    <div class="form-group">
                        <label for="loginEmail">البريد الإلكتروني</label>
                        <input type="email" id="loginEmail" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="loginPassword">كلمة المرور</label>
                        <input type="password" id="loginPassword" required>
                    </div>
                    
                    <button type="submit"><i class="fas fa-sign-in-alt"></i> تسجيل الدخول</button>
                </form>
            </div>
            
            <div class="auth-form" id="registerForm">
                <h2><i class="fas fa-user-plus"></i> إنشاء حساب جديد</h2>
                <div class="alert" id="registerAlert"></div>
                <form id="registerUserForm">
                    <div class="form-group">
                        <label for="registerName">الاسم الكامل</label>
                        <input type="text" id="registerName" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="registerEmail">البريد الإلكتروني</label>
                        <input type="email" id="registerEmail" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="registerPassword">كلمة المرور</label>
                        <input type="password" id="registerPassword" minlength="6" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="registerConfirmPassword">تأكيد كلمة المرور</label>
                        <input type="password" id="registerConfirmPassword" required>
                    </div>

                    <div class="form-group">
                        <label for="initialCapital">رأس المال الابتدائي ($)</label>
                        <input type="number" id="initialCapital" placeholder="أدخل رأس المال الذي ستبدأ به" min="0" step="0.01" value="1000" required>
                    </div>
                    
                    <button type="submit"><i class="fas fa-user-plus"></i> إنشاء حساب</button>
                </form>
            </div>
        </section>
        
        <div class="app-content" id="appContent">
            <!-- Modal تعديل رأس المال -->
            <div id="capitalModal" class="modal">
                <div class="modal-content">
                    <span class="close">&times;</span>
                    <h3><i class="fas fa-money-bill-wave"></i> تعديل رأس المال</h3>
                    <div class="form-group">
                        <label for="newCapital">رأس المال الجديد ($)</label>
                        <input type="number" id="newCapital" min="0" step="0.01" required>
                    </div>
                    <button id="saveCapitalBtn"><i class="fas fa-save"></i> حفظ التغييرات</button>
                </div>
            </div>

            <div class="tabs">
                <div class="tab active" data-tab="form">إضافة صفقة</div>
                <div class="tab" data-tab="charts">الرسوم البيانية</div>
                <div class="tab" data-tab="calendar">تقويم الصفقات</div>
                <div class="tab" data-tab="list">قائمة الصفقات</div>
                <div class="tab" data-tab="performance">أداء رأس المال</div>
            </div>
            
            <div class="tab-content active" id="form-tab">
                <div class="main-content">
                    <section class="form-section">
                        <h2><i class="fas fa-plus-circle"></i> إضافة صفقة جديدة</h2>
                        <form id="tradeForm">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="tradeDate">تاريخ الصفقة</label>
                                    <input type="datetime-local" id="tradeDate" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="asset">الأصل المتداول</label>
                                    <select id="asset" required>
                                        <option value="">اختر الأصل</option>
                                        <!-- العملات الرقمية -->
                                        <option value="BTC">Bitcoin (BTC)</option>
                                        <option value="ETH">Ethereum (ETH)</option>
                                        <option value="BNB">Binance Coin (BNB)</option>
                                        <option value="XRP">Ripple (XRP)</option>
                                        <option value="ADA">Cardano (ADA)</option>
                                        <option value="SOL">Solana (SOL)</option>
                                        <option value="DOT">Polkadot (DOT)</option>
                                        <option value="DOGE">Dogecoin (DOGE)</option>
                                        <option value="AVAX">Avalanche (AVAX)</option>
                                        <option value="MATIC">Polygon (MATIC)</option>
                                        
                                        <!-- السلع -->
                                        <option value="GOLD">الذهب</option>
                                        <option value="SILVER">الفضة</option>
                                        <option value="OIL">النفط</option>
                                        <option value="GAS">الغاز الطبيعي</option>
                                        <option value="COPPER">النحاس</option>
                                        <option value="PLATINUM">البلاتين</option>
                                        
                                        <!-- أزواج العملات -->
                                        <option value="EUR/USD">يورو/دولار</option>
                                        <option value="GBP/USD">جنيه إسترليني/دولار</option>
                                        <option value="USD/JPY">دولار/ين ياباني</option>
                                        <option value="USD/CHF">دولار/فرنك سويسري</option>
                                        <option value="AUD/USD">دولار أسترالي/دولار</option>
                                        <option value="USD/CAD">دولار/دولار كندي</option>
                                        <option value="NZD/USD">دولار نيوزيلندي/دولار</option>
                                        
                                        <!-- المؤشرات -->
                                        <option value="S&P500">S&P 500</option>
                                        <option value="DOW30">Dow Jones 30</option>
                                        <option value="NASDAQ">NASDAQ</option>
                                        <option value="FTSE100">FTSE 100</option>
                                        <option value="DAX30">DAX 30</option>
                                        <option value="NIKKEI225">Nikkei 225</option>
                                        
                                        <!-- الأسهم -->
                                        <option value="AAPL">Apple (AAPL)</option>
                                        <option value="TSLA">Tesla (TSLA)</option>
                                        <option value="AMZN">Amazon (AMZN)</option>
                                        <option value="GOOGL">Google (GOOGL)</option>
                                        <option value="MSFT">Microsoft (MSFT)</option>
                                        <option value="META">Meta (META)</option>
                                        <option value="NFLX">Netflix (NFLX)</option>
                                        <option value="NVDA">NVIDIA (NVDA)</option>
                                        
                                        <option value="other">أخرى</option>
                                    </select>
                                    <input type="text" id="otherAsset" placeholder="اذكر الأصل" style="display: none; margin-top: 5px;">
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="tradeType">نوع الصفقة</label>
                                    <select id="tradeType" required>
                                        <option value="شراء">شراء</option>
                                        <option value="بيع">بيع</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label for="session">جلسة التداول</label>
                                    <select id="session" required>
                                        <option value="آسيا">جلسة آسيا</option>
                                        <option value="لندن">جلسة لندن</option>
                                        <option value="نيويورك">جلسة نيويورك</option>
                                        <option value="أخرى">جلسة أخرى</option>
                                    </select>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="amount">قيمة الصفقة ($)</label>
                                    <input type="number" id="amount" placeholder="أدخل المبلغ بالدولار" min="0" step="0.01" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="result">نتيجة الصفقة</label>
                                    <select id="result" required>
                                        <option value="ربح">ربح</option>
                                        <option value="خسارة">خسارة</option>
                                    </select>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="profitLoss">قيمة الربح/الخسارة ($)</label>
                                <input type="number" id="profitLoss" placeholder="أدخل قيمة الربح/الخسارة" step="0.01" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="tradeImage">صورة الصفقة (اختياري)</label>
                                <div class="file-input-container">
                                    <input type="file" id="tradeImage" accept="image/*" class="file-input">
                                    <label for="tradeImage" class="file-input-label">
                                        <i class="fas fa-upload"></i> اختر صورة
                                    </label>
                                </div>
                                <div class="image-preview" id="imagePreview" style="display: none;">
                                    <img id="previewImage" src="#" alt="معاينة الصورة">
                                    <button type="button" id="removeImageBtn" class="delete-btn"><i class="fas fa-times"></i></button>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="notes">ملاحظات حول الصفقة</label>
                                <textarea id="notes" placeholder="أضف ملاحظاتك حول الصفقة، استراتيجية الدخول والخروج، الدروس المستفادة..." rows="3"></textarea>
                            </div>
                            
                            <button type="submit" class="submit-btn"><i class="fas fa-save"></i> إضافة الصفقة</button>
                        </form>
                    </section>
                    
                    <section class="stats-section">
                        <h2><i class="fas fa-chart-line"></i> إحصائيات التداول</h2>
                        <div class="capital-stats">
                            <div class="capital-card">
                                <div class="capital-label">رأس المال الحالي</div>
                                <div class="capital-value" id="currentCapital">$0</div>
                            </div>
                            <div class="capital-card">
                                <div class="capital-label">إجمالي الأرباح/الخسائر</div>
                                <div class="capital-value" id="totalPnL">$0</div>
                            </div>
                            <div class="capital-card">
                                <div class="capital-label">نسبة العائد</div>
                                <div class="capital-value" id="returnPercentage">0%</div>
                            </div>
                        </div>
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-icon"><i class="fas fa-exchange-alt"></i></div>
                                <div class="stat-label">إجمالي الصفقات</div>
                                <div class="stat-value" id="totalTrades">0</div>
                            </div>
                            
                            <div class="stat-card">
                                <div class="stat-icon"><i class="fas fa-trophy"></i></div>
                                <div class="stat-label">الصفقات الرابحة</div>
                                <div class="stat-value positive" id="winningTrades">0</div>
                            </div>
                            
                            <div class="stat-card">
                                <div class="stat-icon"><i class="fas fa-times-circle"></i></div>
                                <div class="stat-label">الصفقات الخاسرة</div>
                                <div class="stat-value negative" id="losingTrades">0</div>
                            </div>
                            
                            <div class="stat-card">
                                <div class="stat-icon"><i class="fas fa-percentage"></i></div>
                                <div class="stat-label">نسبة النجاح</div>
                                <div class="stat-value" id="successRate">0%</div>
                            </div>
                            
                            <div class="stat-card">
                                <div class="stat-icon"><i class="fas fa-arrow-up"></i></div>
                                <div class="stat-label">متوسط الربح</div>
                                <div class="stat-value" id="averageProfit">$0</div>
                            </div>
                            
                            <div class="stat-card">
                                <div class="stat-icon"><i class="fas fa-arrow-down"></i></div>
                                <div class="stat-label">متوسط الخسارة</div>
                                <div class="stat-value" id="averageLoss">$0</div>
                            </div>
                            
                            <div class="stat-card">
                                <div class="stat-icon"><i class="fas fa-clock"></i></div>
                                <div class="stat-label">أفضل جلسة</div>
                                <div class="stat-value" id="bestSession">-</div>
                            </div>
                            
                            <div class="stat-card">
                                <div class="stat-icon"><i class="fas fa-coins"></i></div>
                                <div class="stat-label">أفضل أصل</div>
                                <div class="stat-value" id="bestAsset">-</div>
                            </div>
                        </div>
                    </section>
                </div>
            </div>
            
            <div class="tab-content" id="charts-tab">
                <section class="charts-section">
                    <h2><i class="fas fa-chart-bar"></i> الرسوم البيانية والإحصائيات</h2>
                    <div class="charts-grid">
                        <div class="chart-container">
                            <h3>توزيع الصفقات (ربح/خسارة)</h3>
                            <canvas id="winLossChart"></canvas>
                        </div>
                        
                        <div class="chart-container">
                            <h3>الأداء حسب جلسات التداول</h3>
                            <canvas id="sessionChart"></canvas>
                        </div>
                        
                        <div class="chart-container">
                            <h3>الأداء حسب الأصول</h3>
                            <canvas id="assetChart"></canvas>
                        </div>
                        
                        <div class="chart-container">
                            <h3>تطور الأرباح عبر الزمن</h3>
                            <canvas id="profitChart"></canvas>
                        </div>
                    </div>
                </section>
            </div>
            
            <div class="tab-content" id="calendar-tab">
                <section class="calendar-section">
                    <h2><i class="fas fa-calendar-alt"></i> تقويم الصفقات</h2>
                    <div class="calendar-header">
                        <h3 id="calendar-month-year">شهر سنة</h3>
                        <div class="calendar-nav">
                            <button id="prev-month"><i class="fas fa-chevron-right"></i> الشهر السابق</button>
                            <button id="current-month">الشهر الحالي</button>
                            <button id="next-month">الشهر التالي <i class="fas fa-chevron-left"></i></button>
                        </div>
                    </div>
                    <div class="calendar-grid" id="calendar-days">
                        <!-- سيتم ملء التقويم بالجافاسكريبت -->
                    </div>
                    <div class="day-details" id="day-details">
                        <h3 id="selected-day">تفاصيل الصفقات ليوم</h3>
                        <div class="day-trades" id="day-trades-list">
                            <!-- سيتم ملء تفاصيل الصفقات بالجافاسكريبت -->
                        </div>
                    </div>
                </section>
            </div>
            
            <div class="tab-content" id="list-tab">
                <section class="transactions-section">
                    <h2><i class="fas fa-list"></i> سجل الصفقات</h2>
                    <div class="filters">
                        <select id="filterAsset">
                            <option value="">جميع الأصول</option>
                        </select>
                        <select id="filterSession">
                            <option value="">جميع الجلسات</option>
                            <option value="آسيا">جلسة آسيا</option>
                            <option value="لندن">جلسة لندن</option>
                            <option value="نيويورك">جلسة نيويورك</option>
                            <option value="أخرى">جلسة أخرى</option>
                        </select>
                        <select id="filterResult">
                            <option value="">جميع النتائج</option>
                            <option value="ربح">الصفقات الرابحة</option>
                            <option value="خسارة">الصفقات الخاسرة</option>
                        </select>
                    </div>
                    <div id="transactionsList">
                        <p class="no-transactions">لا توجد صفقات مسجلة بعد. ابدأ بإضافة أول صفقة.</p>
                    </div>
                </section>
            </div>

            <div class="tab-content" id="performance-tab">
                <section class="performance-section">
                    <h2><i class="fas fa-tachometer-alt"></i> أداء رأس المال</h2>
                    <div class="performance-stats">
                        <div class="performance-card">
                            <div class="performance-icon"><i class="fas fa-wallet"></i></div>
                            <h3>رأس المال الابتدائي</h3>
                            <div class="performance-value" id="initialCapitalDisplay">$0</div>
                        </div>
                        <div class="performance-card">
                            <div class="performance-icon"><i class="fas fa-chart-line"></i></div>
                            <h3>رأس المال الحالي</h3>
                            <div class="performance-value" id="currentCapitalDisplay">$0</div>
                        </div>
                        <div class="performance-card">
                            <div class="performance-icon"><i class="fas fa-money-bill-wave"></i></div>
                            <h3>صافي الربح/الخسارة</h3>
                            <div class="performance-value" id="netPnLDisplay">$0</div>
                        </div>
                        <div class="performance-card">
                            <div class="performance-icon"><i class="fas fa-percentage"></i></div>
                            <h3>نسبة العودة</h3>
                            <div class="performance-value" id="roiDisplay">0%</div>
                        </div>
                    </div>
                    <div class="chart-container full-width">
                        <h3>تطور رأس المال مع الزمن</h3>
                        <canvas id="capitalChart"></canvas>
                    </div>
                    <div class="performance-grid">
                        <div class="chart-container">
                            <h3>توزيع الصفقات الشهري</h3>
                            <canvas id="monthlyTradesChart"></canvas>
                        </div>
                        <div class="chart-container">
                            <h3>معدل النجاح الشهري</h3>
                            <canvas id="monthlySuccessChart"></canvas>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </div>

    <!-- Modal عرض الصورة -->
    <div id="imageModal" class="modal">
        <div class="modal-content image-modal">
            <span class="close">&times;</span>
            <img id="modalImage" src="" alt="صورة الصفقة">
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
